**DHCP** - 
1. шлет discoverу пакет на бродкаст, валидный DHCP сервер перехватывает и шлет 
2. шлет  Offer пакет с новым адресом для клиента
3. клиент шлет Request адресной информации опять на broadcast (потому что еще не присвоил полученный адрес), оповещая все DHCP ( если их несколько), что принял offer.
4. DHCP присваивает адрес клиенту, шлет ACK
Для отличия клиентов используестя transactionID. здесь 4 запроса на клиента. бывает до 8 (DHCP RFC)

**TCP** - 
обесп. надежную двунаправленную связь (получатель/отправитель шлют покеты в произвольное время) засчет разных типов пакетов и флагов.
Для устаноки соед.:
1. SYN пакет..с sequence number 32 bit..(первый SYN имеет 0) + номер порта(src/dst), тип пакета и тд.
2. SYN/ACK - Сервер отвечает используя seq. number . ACK часть инкементит seq.numb. использует как acknowledge number. Когда клиент получает ack. numb содержащий orig. seq. numb..то знает что сервер готов получать.
SYN часть такая же как у перевого SYN пакета. шлется для клиента чтоб обработать acknowledge.
3. ACK - шлет клиент, икрементит seq. number на 1, как acknowledge numer.

Data flow:
Будет использоваться seq. number. для order.,
но увеличиваться будет не на +1, а на размер дата frame

Разрыв соед:
1.Сервер закончил передавать данные и шлет FIN/ACK
2. Клиент отвечает ACK, используя правила инкрементирования и seq. number из FIN. Закрывается соединение со стороны сервера. При этом клиент может еще слать запросы
3. Клиент шлет FIN/ACK
4. Сервер ACK


**IP** - обесп. адресацию, передачу по сети..но без устанвления соединения. Поэтому в связке с TCP


**FTP** - 
1.Для уст. соед. стандартный TCP handshake
2. Сервер шлет приветсвие и готов принимать login credentials.
3. Клиент шлет login/pass
4. Сервер ACKnowledgement
5. Клиент использует набор команд для ощения с сервером

CWD - для смены  working directory
SIZE - запросить размер файла
RETR - скачать файл



**TELNET** - Для управления devica-ми.
Сервер, рутер, свитчи..
Вся инфа в открытом виде

Для установки сессии, используются уникальные опции:
скорость передачи (communication rates)
режимы передачи дааных (data transfer modes).

Опции должны быть синхронизированны перед передачей данных.
Эти опции сост. порядка 30 первых пакетов.
напр.
27 пакет - определяет сервер как OpenBSD система
29 - логин промт для клиента.
31 - имя клиента
36 - запрос пароля
38 - ответ пароля



**ICMP** - часть IP протокола. для troubleshooting-a.
Каждый пакет имеет номер. Этим определяется как бедет обработан получателем.RFC 792
ICMP type 8 (echo ping request)..должен получить  type 0 (echo ping reply)





